{"version":3,"sources":["webpack://effectgraph/./src/llexec/DevExec.vue?f49a","webpack://effectgraph/./src/llexec/SandBox.vue?4ad3","webpack://effectgraph/./src/llexec/GraphNode.vue?44d5","webpack://effectgraph/./src/llexec/vue-compile.js","webpack://effectgraph/src/llexec/GraphNode.vue","webpack://effectgraph/./src/llexec/GraphNode.vue?f615","webpack://effectgraph/./src/llexec/GraphNode.vue","webpack://effectgraph/src/llexec/SandBox.vue","webpack://effectgraph/./src/llexec/SandBox.vue?88b7","webpack://effectgraph/./src/llexec/SandBox.vue","webpack://effectgraph/src/llexec/DevExec.vue","webpack://effectgraph/./src/llexec/DevExec.vue?841c","webpack://effectgraph/./src/llexec/DevExec.vue","webpack://effectgraph/./src/llexec/SandBox.vue?ee2b","webpack://effectgraph/./src/llexec/SandBox.vue?b48b","webpack://effectgraph/./src/llexec/SandBox.vue?c7c6"],"names":["getTagContent","str","start","end","indexOf","slice","length","getCompoInfo","compoStr","output","trim","template","script","style","scoped","styleScoped","compile","src","noCSS","library","info","scopeID","Math","ceil","random","toString","css","JSON","stringify","replace","code","window","THREE","loadJS","filter","f","url","map","lib","runner","Function","result","Vue","addDeps","vue","dep","components","Cache","makeCompo","vueComp"],"mappings":"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","file":"effectgraph.common.2.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"full\"},[(_vm.water)?_c('SandBox',{attrs:{\"water\":_vm.water}}):_vm._e()],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.activeNodes && _vm.water)?_c('div',{staticClass:\"app-entry-dom\"},_vm._l((_vm.activeNodes),function(node){return _c('GraphNode',{key:node._id,attrs:{\"nodeMap\":_vm.nodeMap,\"nodes\":_vm.activeNodes,\"node\":node}})}),1):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return (_vm.compo && _vm.node)?_c(_vm.compo,{ref:\"me\",tag:\"Component\",attrs:{\"parentNode\":_vm.parentNode,\"parentComponent\":_vm.nodeMap[_vm.node.to],\"isRootNode\":!!!_vm.node.to,\"components\":_vm.nodeMap,\"nodes\":_vm.nodes,\"node\":_vm.node},on:{\"exec\":_vm.onExec,\"ready\":_vm.onReady,\"remove\":_vm.onRemove}}):_vm._e()}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","// // npm i @babel/standalone@7.0.0-beta.32 babel-plugin-transform-object-rest-spread babel-plugin-transform-es2015-modules-umd --save\n// import * as Babel from '@babel/standalone/babel.js'\n\n// var dynamicSpread = require('babel-plugin-transform-object-rest-spread')\n// Babel.registerPlugin('transform-object-rest-spread', dynamicSpread)\n\n// // var umd = require('babel-plugin-transform-es2015-modules-umd')\n// // Babel.registerPlugin('transform-es2015-modules-umd', umd)\n\n// // var es6 = [\n// //   [ 'transform-object-rest-spread', { 'useBuiltIns': true } ],\n// //   [\n// //     'transform-es2015-modules-umd',\n// //     {\n// //       exactGlobals: true\n// //     }\n// //   ]\n// // ]\n// var es6 = [\n//   [ 'transform-object-rest-spread', { 'useBuiltIns': true } ]\n//   // [\n//   //   'transform-es2015-modules-umd',\n//   //   {\n//   //     exactGlobals: true\n//   //   }\n//   // ]\n// ]\nimport Vue from 'vue'\nimport * as THREE from 'three'\nimport loadJS from 'load-js'\n\nfunction getTagContent (str, start, end) {\n  if (str.indexOf(start) === -1) {\n    return false\n  }\n  return str.slice(str.indexOf(start) + start.length, str.indexOf(end))\n}\n\nconst getCompoInfo = (compoStr) => {\n  var output = {}\n  compoStr = compoStr.trim()\n  output.template = getTagContent(compoStr, '<template>', '</template>') || ''\n  output.script = getTagContent(compoStr, '<script>', '</script>') || ''\n  output.style = getTagContent(compoStr, '<style>', '</style>') || getTagContent(compoStr, '<style scoped>', '</style>')\n\n  var scoped = !!getTagContent(compoStr, '<style scoped>', '</style>')\n  output.styleScoped = scoped\n  return output\n}\n\nexport const compile = async ({ src, noCSS, library = [] }) => {\n  let info = getCompoInfo(src)\n  var scopeID = ' data-s-' + (Math.ceil(Math.random() * 100000)).toString(36)\n  let css = JSON.stringify(info.style)\n  info.template = info.template.replace('>', `${scopeID}>`)\n\n  if (noCSS) {\n    css = JSON.stringify('')\n  }\n\n  /* eslint-disable */\n\n  let code = `\n    var css = ${css};\n    var head = document.head || document.getElementsByTagName('head')[0];\n    var style = document.createElement('style');\n    style.type = 'text/css';\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n\n    function addScope (styleElt, scopeName) {\n\n      function process() {\n\n        var sheet = styleElt.sheet;\n        var rules = sheet.cssRules;\n        for ( var i = 0; i < rules.length; ++i ) {\n          let rule = rules[i];\n\n          if ( rule.type === 4 ) {\n\n            // console.log(rule)\n            for ( var j = 0; j < rule.cssRules.length; ++j ) {\n\n              let scopedSelectors = [];\n              let subRule = rule.cssRules[j];\n\n              subRule.selectorText.split(/\\s*,\\s*/).forEach(function(sel) {\n\n                scopedSelectors.push(scopeName+' '+sel);\n                let segments = sel.match(/([^ :]+)(.+)?/);\n                scopedSelectors.push(segments[1] + scopeName + (segments[2]||''));\n              });\n\n              let scopedRule = scopedSelectors.join(',') + subRule.cssText.substr(subRule.selectorText.length);\n\n              rule.deleteRule(j);\n              rule.insertRule(scopedRule, j);\n              // console.log(rule);\n            }\n\n            continue;\n          }\n\n          if ( rule.type !== 1 )\n            continue;\n\n          let scopedSelectors = [];\n\n          rule.selectorText.split(/\\s*,\\s*/).forEach(function(sel) {\n\n            scopedSelectors.push(scopeName+' '+sel);\n            let segments = sel.match(/([^ :]+)(.+)?/);\n            scopedSelectors.push(segments[1] + scopeName + (segments[2]||''));\n          });\n\n          let scopedRule = scopedSelectors.join(',') + rule.cssText.substr(rule.selectorText.length);\n          sheet.deleteRule(i);\n          sheet.insertRule(scopedRule, i);\n        }\n      }\n\n      try {\n        // firefox may fail sheet.cssRules with InvalidAccessError\n        process();\n      } catch (ex) {\n\n        if ( ex instanceof DOMException && ex.code === DOMException.INVALID_ACCESS_ERR ) {\n\n          styleElt.sheet.disabled = true;\n          styleElt.addEventListener('load', function onStyleLoaded() {\n\n            styleElt.removeEventListener('load', onStyleLoaded);\n\n            // firefox need this timeout otherwise we have to use document.importNode(style, true)\n            setTimeout(function() {\n\n              process();\n              styleElt.sheet.disabled = false;\n            });\n          });\n          return;\n        }\n\n        throw ex;\n      }\n    }\n\n    head.appendChild(style);\n    if (${info.styleScoped}) {\n      addScope(style, '[${scopeID}]');\n    }\n  `\n\n  /* eslint-enable */\n\n  // inject template property into the export Object\n  info.script = `var mycompo = { template: '<div></div>' };` + info.script\n  info.script = info.script.replace('export default {', `mycompo = { \\n\\ttemplate: ${JSON.stringify(info.template)},`)\n\n  let end = `\n    return mycompo;\n  `\n  // console.log(info)\n  let output = code + info.script + end\n\n  window.THREE = THREE\n\n  // console.log(library)\n\n  await loadJS(library.filter(f => f.url).map((lib) => {\n    return {\n      url: lib.url\n    }\n  }))\n\n  /* eslint-disable */\n  let runner = new Function('Vue', 'THREE', 'window', output)\n  /* eslint-enable */\n\n  let result = runner(Vue, THREE, window)\n\n  // console.log(result)\n  return result\n}\n\nexport const addDeps = ({ vue, dep = {} }) => {\n  vue.components = {\n    ...vue.components,\n    ...dep\n  }\n  return vue\n}\n\nexport const Cache = {}\n\nexport const makeCompo = async ({ src, library = [] }) => {\n  if (Cache[src]) {\n    return Cache[src]\n  } else {\n    let vueComp = await compile({\n      src,\n      noCSS: false,\n      library\n    })\n    vueComp = addDeps({\n      vue: vueComp,\n      dep: {\n        // Object3D: require('../vfx/FreeJS/Object3D.vue').default\n      }\n    })\n    Cache[src] = vueComp\n    return vueComp\n  }\n}\n","<template>\n  <Component v-if=\"compo && node\" @exec=\"onExec\" :parentNode=\"parentNode\" ref=\"me\" :parentComponent=\"nodeMap[node.to]\" :isRootNode=\"!!!node.to\" :components=\"nodeMap\" :nodes=\"nodes\" :node=\"node\" @ready=\"onReady\" @remove=\"onRemove\" :is=\"compo\"></Component>\n</template>\n\n<script>\nimport * as VC from './vue-compile'\nexport default {\n  props: {\n    node: {},\n    nodes: {},\n    nodeMap: {}\n  },\n  data () {\n    return {\n      parentNode: this.nodes.find(n => n._id === this.node.to),\n      compo: false,\n      self: {},\n      rAFID: 0,\n      execFnc () {\n      }\n    }\n  },\n  beforeDestroy () {\n    window.cancelAnimationFrame(this.rAFID)\n  },\n  created () {\n    let rAF = () => {\n      this.rAFID = window.requestAnimationFrame(rAF)\n      this.execFnc()\n    }\n    this.rAFID = window.requestAnimationFrame(rAF)\n  },\n  methods: {\n    onExec (v) {\n      this.execFnc = v\n    },\n    onReady (compos) {\n      let tt = setInterval(() => {\n        let me = this.nodeMap[this.node._id] = compos\n        let parent = this.nodeMap[this.node.to]\n        if (parent) {\n          clearInterval(tt)\n          me.$emit('addToParent', {\n            parent,\n            me\n          })\n          parent.$emit('addChild', {\n            child: me,\n            me: parent\n          })\n        }\n      }, 1)\n    },\n    onRemove () {\n      let me = this.$refs['me']\n      let parent = this.nodeMap[this.node.to]\n      if (this.nodeMap[this.node._id]) {\n        this.nodeMap[this.node._id].$emit('removeFromParent', {\n          me: me,\n          parent: parent\n        })\n      }\n      if (this.node.to) {\n        this.nodeMap[this.node.to].$emit('removeChild', {\n          me: parent,\n          child: me\n        })\n      }\n    },\n    async getCompos ({ node }) {\n      let temp = `\n        <template>\n          <div class=\"omg-this-compo\" nodeid=\"${node._id}\"></div>\n        </template>\n        <script>\n        export default {\n        };\n        ${'<'}/script>\n        <style>\n        </style>\n      `\n      this.compo = await VC.makeCompo({ src: node.src || temp, library: node.library || [] })\n      this.$forceUpdate()\n    },\n    init () {\n\n    }\n  },\n  mounted () {\n    this.getCompos({ node: this.node })\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GraphNode.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./GraphNode.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./GraphNode.vue?vue&type=template&id=59aa00ad&\"\nimport script from \"./GraphNode.vue?vue&type=script&lang=js&\"\nexport * from \"./GraphNode.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"app-entry-dom\" v-if=\"activeNodes && water\">\n    <GraphNode :nodeMap=\"nodeMap\" :nodes=\"activeNodes\" :node=\"node\" :key=\"node._id\" v-for=\"node in activeNodes\"></GraphNode>\n  </div>\n</template>\n\n<script>\nimport GraphNode from './GraphNode.vue'\n// import * as Node from '../llsvg/node.js'\nexport default {\n  components: {\n    GraphNode\n  },\n  props: {\n    water: {}\n  },\n  computed: {\n    nodes () {\n      return this.water.nodes\n    },\n    activeNodes () {\n      return this.nodes.filter(a => !a.trashed).slice()\n    }\n  },\n  watch: {\n    water () {\n    }\n  },\n  data () {\n    return {\n      nodeMap: {}\n    }\n  },\n  mounted () {\n  },\n  methods: {\n  }\n}\n</script>\n\n<style>\nbody, html, .app-entry-dom, .full{\n  width: 100%;\n  height: 100%;\n}\nhtml{\n  overflow: hidden;\n}\nbody{\n  margin: 0px;\n}\n.app-entry-dom {\n  font-family: 'Avenir', Helvetica, Arial, sans-serif;\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n  color: #2c3e50;\n\n  overflow: scroll;\n  -webkit-overflow-scrolling: touch;\n}\n</style>\n\n<style scoped>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SandBox.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SandBox.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./SandBox.vue?vue&type=template&id=353899c0&scoped=true&\"\nimport script from \"./SandBox.vue?vue&type=script&lang=js&\"\nexport * from \"./SandBox.vue?vue&type=script&lang=js&\"\nimport style0 from \"./SandBox.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"353899c0\",\n  null\n  \n)\n\nexport default component.exports","<template>\n  <div class=\"full\">\n    <SandBox v-if=\"water\" :water=\"water\"></SandBox>\n  </div>\n</template>\n\n<script>\nimport SandBox from './SandBox.vue'\n\nexport default {\n  props: {\n    nodes: {}\n  },\n  components: {\n    SandBox\n  },\n  data () {\n    return {\n      water: {\n        nodes: this.nodes\n      }\n    }\n  },\n  methods: {\n    async postMessage (evt) {\n      console.log(evt)\n      // let sandbox = await this.tryGet(() => this.$refs.sandbox)\n    },\n    tryGet (fn = () => {}) {\n      return new Promise((resolve) => {\n        let tt = setInterval(() => {\n          let result = fn()\n          if (result) {\n            clearInterval(tt)\n            resolve(result)\n          }\n        }, 0)\n      })\n    }\n  },\n  watch: {\n    nodes () {\n      this.water.nodes = this.nodes\n    }\n  }\n}\n</script>\n\n<style>\n\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DevExec.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./DevExec.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./DevExec.vue?vue&type=template&id=6f353588&\"\nimport script from \"./DevExec.vue?vue&type=script&lang=js&\"\nexport * from \"./DevExec.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import mod from \"-!../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SandBox.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../node_modules/vue-style-loader/index.js??ref--6-oneOf-1-0!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SandBox.vue?vue&type=style&index=0&lang=css&\"","exports = module.exports = require(\"../../node_modules/css-loader/lib/css-base.js\")(false);\n// imports\n\n\n// module\nexports.push([module.id, \".app-entry-dom,.full,body,html{width:100%;height:100%}html{overflow:hidden}body{margin:0}.app-entry-dom{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#2c3e50;overflow:scroll;-webkit-overflow-scrolling:touch}\", \"\"]);\n\n// exports\n","// style-loader: Adds some css to the DOM by adding a <style> tag\n\n// load the styles\nvar content = require(\"!!../../node_modules/css-loader/index.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./SandBox.vue?vue&type=style&index=0&lang=css&\");\nif(typeof content === 'string') content = [[module.id, content, '']];\nif(content.locals) module.exports = content.locals;\n// add the styles to the DOM\nvar add = require(\"!../../node_modules/vue-style-loader/lib/addStylesClient.js\").default\nvar update = add(\"d841d61c\", content, true, {\"sourceMap\":false,\"shadowMode\":false});"],"sourceRoot":""}