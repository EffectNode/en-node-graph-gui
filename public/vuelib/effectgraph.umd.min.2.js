(("undefined"!==typeof self?self:this)["webpackJsonpeffectgraph"]=("undefined"!==typeof self?self:this)["webpackJsonpeffectgraph"]||[]).push([[2],{"65c2":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"full"},[e.water?n("SandBox",{attrs:{water:e.water}}):e._e()],1)},s=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.activeNodes&&e.water?n("div",{staticClass:"app-entry-dom"},e._l(e.activeNodes,function(t){return n("GraphNode",{key:t._id,attrs:{nodeMap:e.nodeMap,nodes:e.activeNodes,node:t}})}),1):e._e()},c=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.compo&&e.node?n(e.compo,{ref:"me",tag:"Component",attrs:{parentNode:e.parentNode,parentComponent:e.nodeMap[e.node.to],isRootNode:!e.node.to,components:e.nodeMap,nodes:e.nodes,node:e.node},on:{ready:e.onReady,remove:e.onRemove}}):e._e()},i=[],l=(n("96cf"),n("3b8d")),d=(n("7514"),n("cebc")),u=(n("a481"),n("6b54"),n("8bbf")),p=n.n(u),f=n("5a89"),m=n("2100"),h=n.n(m);function y(e,t,n){return-1!==e.indexOf(t)&&e.slice(e.indexOf(t)+t.length,e.indexOf(n))}var v=function(e){var t={};e=e.trim(),t.template=y(e,"<template>","</template>")||"",t.script=y(e,"<script>","<\/script>")||"",t.style=y(e,"<style>","</style>")||y(e,"<style scoped>","</style>");var n=!!y(e,"<style scoped>","</style>");return t.styleScoped=n,t},g=function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,o,s,r,c,a,i,l,d,u,m,y;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.src,o=t.noCSS,s=t.library,r=void 0===s?[]:s,c=v(n),a=" data-s-"+Math.ceil(1e5*Math.random()).toString(36),i=JSON.stringify(c.style),c.template=c.template.replace(">","".concat(a,">")),o&&(i=JSON.stringify("")),l="\n    var css = ".concat(i,";\n    var head = document.head || document.getElementsByTagName('head')[0];\n    var style = document.createElement('style');\n    style.type = 'text/css';\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n\n    function addScope (styleElt, scopeName) {\n\n      function process() {\n\n        var sheet = styleElt.sheet;\n        var rules = sheet.cssRules;\n        for ( var i = 0; i < rules.length; ++i ) {\n          let rule = rules[i];\n\n          if ( rule.type === 4 ) {\n\n            // console.log(rule)\n            for ( var j = 0; j < rule.cssRules.length; ++j ) {\n\n              let scopedSelectors = [];\n              let subRule = rule.cssRules[j];\n\n              subRule.selectorText.split(/s*,s*/).forEach(function(sel) {\n\n                scopedSelectors.push(scopeName+' '+sel);\n                let segments = sel.match(/([^ :]+)(.+)?/);\n                scopedSelectors.push(segments[1] + scopeName + (segments[2]||''));\n              });\n\n              let scopedRule = scopedSelectors.join(',') + subRule.cssText.substr(subRule.selectorText.length);\n\n              rule.deleteRule(j);\n              rule.insertRule(scopedRule, j);\n              // console.log(rule);\n            }\n\n            continue;\n          }\n\n          if ( rule.type !== 1 )\n            continue;\n\n          let scopedSelectors = [];\n\n          rule.selectorText.split(/s*,s*/).forEach(function(sel) {\n\n            scopedSelectors.push(scopeName+' '+sel);\n            let segments = sel.match(/([^ :]+)(.+)?/);\n            scopedSelectors.push(segments[1] + scopeName + (segments[2]||''));\n          });\n\n          let scopedRule = scopedSelectors.join(',') + rule.cssText.substr(rule.selectorText.length);\n          sheet.deleteRule(i);\n          sheet.insertRule(scopedRule, i);\n        }\n      }\n\n      try {\n        // firefox may fail sheet.cssRules with InvalidAccessError\n        process();\n      } catch (ex) {\n\n        if ( ex instanceof DOMException && ex.code === DOMException.INVALID_ACCESS_ERR ) {\n\n          styleElt.sheet.disabled = true;\n          styleElt.addEventListener('load', function onStyleLoaded() {\n\n            styleElt.removeEventListener('load', onStyleLoaded);\n\n            // firefox need this timeout otherwise we have to use document.importNode(style, true)\n            setTimeout(function() {\n\n              process();\n              styleElt.sheet.disabled = false;\n            });\n          });\n          return;\n        }\n\n        throw ex;\n      }\n    }\n\n    head.appendChild(style);\n    if (").concat(c.styleScoped,") {\n      addScope(style, '[").concat(a,"]');\n    }\n  "),c.script="var mycompo = { template: '<div></div>' };"+c.script,c.script=c.script.replace("export default {","mycompo = { \n\ttemplate: ".concat(JSON.stringify(c.template),",")),d="\n    return mycompo;\n  ",u=l+c.script+d,window.THREE=f,console.log(r),e.next=15,h()(r.filter(function(e){return e.url}).map(function(e){return{url:e.url}}));case 15:return m=new Function("Vue","THREE","window",u),y=m(p.a,f,window),console.log(y),e.abrupt("return",y);case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),b=function(e){var t=e.vue,n=e.dep,o=void 0===n?{}:n;return t.components=Object(d["a"])({},t.components,o),t},w={},x=function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,o,s,r;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(n=t.src,o=t.library,s=void 0===o?[]:o,!w[n]){e.next=5;break}return e.abrupt("return",w[n]);case 5:return e.next=7,g({src:n,noCSS:!1,library:s});case 7:return r=e.sent,r=b({vue:r,dep:{}}),w[n]=r,e.abrupt("return",r);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),R={props:{node:{},nodes:{},nodeMap:{}},data:function(){var e=this;return{parentNode:this.nodes.find(function(t){return t._id===e.node.to}),compo:!1,self:{}}},created:function(){},methods:{onReady:function(e){var t=this,n=setInterval(function(){var o=t.nodeMap[t.node._id]=e,s=t.nodeMap[t.node.to];s&&(clearInterval(n),o.$emit("addToParent",{parent:s,me:o}),s.$emit("addChild",{child:o,me:s}))},1)},onRemove:function(){var e=this.$refs["me"],t=this.nodeMap[this.node.to];this.nodeMap[this.node._id]&&this.nodeMap[this.node._id].$emit("removeFromParent",{me:e,parent:t}),this.node.to&&this.nodeMap[this.node.to].$emit("removeChild",{me:t,child:e})},getCompos:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.node,o='\n        <template>\n          <div class="omg-this-compo" nodeid="'.concat(n._id,'"></div>\n        </template>\n        <script>\n        export default {\n        };\n        ',"<","/script>\n        <style>\n        </style>\n      "),e.next=4,x({src:n.src||o,library:n.library||[]});case 4:this.compo=e.sent,this.$forceUpdate();case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),init:function(){}},mounted:function(){this.getCompos({node:this.node})}},S=R,E=n("2877"),N=Object(E["a"])(S,a,i,!1,null,null,null),M=N.exports,_={components:{GraphNode:M},props:{water:{}},computed:{nodes:function(){return this.water.nodes},activeNodes:function(){return this.nodes.filter(function(e){return!e.trashed}).slice()}},watch:{water:function(){}},data:function(){return{nodeMap:{}}},mounted:function(){},methods:{}},j=_,O=(n("923e"),Object(E["a"])(j,r,c,!1,null,"353899c0",null)),C=O.exports,T={props:{nodes:{}},components:{SandBox:C},data:function(){return{water:{nodes:this.nodes}}},methods:{postMessage:function(e){console.log(e),this.$refs.sandbox}},watch:{nodes:function(){this.water.nodes=this.nodes}}},$=T,k=Object(E["a"])($,o,s,!1,null,null,null);t["default"]=k.exports},"923e":function(e,t,n){"use strict";var o=n("d47b"),s=n.n(o);s.a},bd71:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".app-entry-dom,.full,body,html{width:100%;height:100%}html{overflow:hidden}body{margin:0}.app-entry-dom{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#2c3e50;overflow:scroll;-webkit-overflow-scrolling:touch}",""])},d47b:function(e,t,n){var o=n("bd71");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var s=n("499e").default;s("d841d61c",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=effectgraph.umd.min.2.js.map