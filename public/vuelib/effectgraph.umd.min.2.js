(("undefined"!==typeof self?self:this)["webpackJsonpeffectgraph"]=("undefined"!==typeof self?self:this)["webpackJsonpeffectgraph"]||[]).push([[2],{"65c2":function(e,n,t){"use strict";t.r(n);var o=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"full"},[e.water?t("SandBox",{attrs:{water:e.water}}):e._e()],1)},r=[],s=(t("551c"),t("96cf"),t("3b8d")),c=function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.activeNodes&&e.water?t("div",{staticClass:"app-entry-dom"},e._l(e.activeNodes,function(n){return t("GraphNode",{key:n._id,attrs:{nodeMap:e.nodeMap,nodes:e.activeNodes,node:n}})}),1):e._e()},a=[],i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return e.compo&&e.node?t(e.compo,{ref:"me",tag:"Component",attrs:{parentNode:e.parentNode,parentComponent:e.nodeMap[e.node.to],isRootNode:!e.node.to,components:e.nodeMap,nodes:e.nodes,node:e.node},on:{exec:e.onExec,ready:e.onReady,remove:e.onRemove}}):e._e()},l=[],u=(t("7514"),t("cebc")),d=(t("a481"),t("6b54"),t("8bbf")),p=t.n(d),f=t("5a89"),m=t("2100"),h=t.n(m);function v(e,n,t){return-1!==e.indexOf(n)&&e.slice(e.indexOf(n)+n.length,e.indexOf(t))}var y=function(e){var n={};e=e.trim(),n.template=v(e,"<template>","</template>")||"",n.script=v(e,"<script>","<\/script>")||"",n.style=v(e,"<style>","</style>")||v(e,"<style scoped>","</style>");var t=!!v(e,"<style scoped>","</style>");return n.styleScoped=t,n},w=function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(n){var t,o,r,s,c,a,i,l,u,d,m,v;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.src,o=n.noCSS,r=n.library,s=void 0===r?[]:r,c=y(t),a=" data-s-"+Math.ceil(1e5*Math.random()).toString(36),i=JSON.stringify(c.style),c.template=c.template.replace(">","".concat(a,">")),o&&(i=JSON.stringify("")),l="\n    var css = ".concat(i,";\n    var head = document.head || document.getElementsByTagName('head')[0];\n    var style = document.createElement('style');\n    style.type = 'text/css';\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n\n    function addScope (styleElt, scopeName) {\n\n      function process() {\n\n        var sheet = styleElt.sheet;\n        var rules = sheet.cssRules;\n        for ( var i = 0; i < rules.length; ++i ) {\n          let rule = rules[i];\n\n          if ( rule.type === 4 ) {\n\n            // console.log(rule)\n            for ( var j = 0; j < rule.cssRules.length; ++j ) {\n\n              let scopedSelectors = [];\n              let subRule = rule.cssRules[j];\n\n              subRule.selectorText.split(/s*,s*/).forEach(function(sel) {\n\n                scopedSelectors.push(scopeName+' '+sel);\n                let segments = sel.match(/([^ :]+)(.+)?/);\n                scopedSelectors.push(segments[1] + scopeName + (segments[2]||''));\n              });\n\n              let scopedRule = scopedSelectors.join(',') + subRule.cssText.substr(subRule.selectorText.length);\n\n              rule.deleteRule(j);\n              rule.insertRule(scopedRule, j);\n              // console.log(rule);\n            }\n\n            continue;\n          }\n\n          if ( rule.type !== 1 )\n            continue;\n\n          let scopedSelectors = [];\n\n          rule.selectorText.split(/s*,s*/).forEach(function(sel) {\n\n            scopedSelectors.push(scopeName+' '+sel);\n            let segments = sel.match(/([^ :]+)(.+)?/);\n            scopedSelectors.push(segments[1] + scopeName + (segments[2]||''));\n          });\n\n          let scopedRule = scopedSelectors.join(',') + rule.cssText.substr(rule.selectorText.length);\n          sheet.deleteRule(i);\n          sheet.insertRule(scopedRule, i);\n        }\n      }\n\n      try {\n        // firefox may fail sheet.cssRules with InvalidAccessError\n        process();\n      } catch (ex) {\n\n        if ( ex instanceof DOMException && ex.code === DOMException.INVALID_ACCESS_ERR ) {\n\n          styleElt.sheet.disabled = true;\n          styleElt.addEventListener('load', function onStyleLoaded() {\n\n            styleElt.removeEventListener('load', onStyleLoaded);\n\n            // firefox need this timeout otherwise we have to use document.importNode(style, true)\n            setTimeout(function() {\n\n              process();\n              styleElt.sheet.disabled = false;\n            });\n          });\n          return;\n        }\n\n        throw ex;\n      }\n    }\n\n    head.appendChild(style);\n    if (").concat(c.styleScoped,") {\n      addScope(style, '[").concat(a,"]');\n    }\n  "),c.script="var mycompo = { template: '<div></div>' };"+c.script,c.script=c.script.replace("export default {","mycompo = { \n\ttemplate: ".concat(JSON.stringify(c.template),",")),u="\n    return mycompo;\n  ",d=l+c.script+u,window.THREE=f,e.next=14,h()(s.filter(function(e){return e.url}).map(function(e){return{url:e.url}}));case 14:return m=new Function("Vue","THREE","window",d),v=m(p.a,f,window),e.abrupt("return",v);case 17:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),x=function(e){var n=e.vue,t=e.dep,o=void 0===t?{}:t;return n.components=Object(u["a"])({},n.components,o),n},g={},b=function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(n){var t,o,r,s;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(t=n.src,o=n.library,r=void 0===o?[]:o,!g[t]){e.next=5;break}return e.abrupt("return",g[t]);case 5:return e.next=7,w({src:t,noCSS:!1,library:r});case 7:return s=e.sent,s=x({vue:s,dep:{}}),g[t]=s,e.abrupt("return",s);case 11:case"end":return e.stop()}},e)}));return function(n){return e.apply(this,arguments)}}(),R={props:{node:{},nodes:{},nodeMap:{}},data:function(){var e=this;return{parentNode:this.nodes.find(function(n){return n._id===e.node.to}),compo:!1,self:{},rAFID:0,execFnc:function(){}}},beforeDestroy:function(){window.cancelAnimationFrame(this.rAFID)},created:function(){var e=this,n=function n(){e.rAFID=window.requestAnimationFrame(n),e.execFnc()};this.rAFID=window.requestAnimationFrame(n)},methods:{onExec:function(e){this.execFnc=e},onReady:function(e){var n=this,t=setInterval(function(){var o=n.nodeMap[n.node._id]=e,r=n.nodeMap[n.node.to];r&&(clearInterval(t),o.$emit("addToParent",{parent:r,me:o}),r.$emit("addChild",{child:o,me:r}))},1)},onRemove:function(){var e=this.$refs["me"],n=this.nodeMap[this.node.to];this.nodeMap[this.node._id]&&this.nodeMap[this.node._id].$emit("removeFromParent",{me:e,parent:n}),this.node.to&&this.nodeMap[this.node.to].$emit("removeChild",{me:n,child:e})},getCompos:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(n){var t,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return t=n.node,o='\n        <template>\n          <div class="omg-this-compo" nodeid="'.concat(t._id,'"></div>\n        </template>\n        <script>\n        export default {\n        };\n        ',"<","/script>\n        <style>\n        </style>\n      "),e.next=4,b({src:t.src||o,library:t.library||[]});case 4:this.compo=e.sent,this.$forceUpdate();case 6:case"end":return e.stop()}},e,this)}));function n(n){return e.apply(this,arguments)}return n}(),init:function(){}},mounted:function(){this.getCompos({node:this.node})}},S=R,E=t("2877"),N=Object(E["a"])(S,i,l,!1,null,null,null),M=N.exports,_={components:{GraphNode:M},props:{water:{}},computed:{nodes:function(){return this.water.nodes},activeNodes:function(){return this.nodes.filter(function(e){return!e.trashed}).slice()}},watch:{water:function(){}},data:function(){return{nodeMap:{}}},mounted:function(){},methods:{}},j=_,O=(t("923e"),Object(E["a"])(j,c,a,!1,null,"353899c0",null)),C=O.exports,T={props:{nodes:{}},components:{SandBox:C},data:function(){return{water:{nodes:this.nodes}}},methods:{postMessage:function(){var e=Object(s["a"])(regeneratorRuntime.mark(function e(n){return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:console.log(n);case 1:case"end":return e.stop()}},e)}));function n(n){return e.apply(this,arguments)}return n}(),tryGet:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){};return new Promise(function(n){var t=setInterval(function(){var o=e();o&&(clearInterval(t),n(o))},0)})}},watch:{nodes:function(){this.water.nodes=this.nodes}}},A=T,F=Object(E["a"])(A,o,r,!1,null,null,null);n["default"]=F.exports},"923e":function(e,n,t){"use strict";var o=t("d47b"),r=t.n(o);r.a},bd71:function(e,n,t){n=e.exports=t("2350")(!1),n.push([e.i,".app-entry-dom,.full,body,html{width:100%;height:100%}html{overflow:hidden}body{margin:0}.app-entry-dom{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#2c3e50;overflow:scroll;-webkit-overflow-scrolling:touch}",""])},d47b:function(e,n,t){var o=t("bd71");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var r=t("499e").default;r("d841d61c",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=effectgraph.umd.min.2.js.map