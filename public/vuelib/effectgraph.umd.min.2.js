(("undefined"!==typeof self?self:this)["webpackJsonpeffectgraph"]=("undefined"!==typeof self?self:this)["webpackJsonpeffectgraph"]||[]).push([[2],{"0a14":function(e,t,n){"use strict";var o=n("3bbd"),s=n.n(o);s.a},"3bbd":function(e,t,n){var o=n("659e");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var s=n("499e").default;s("47865a5c",o,!0,{sourceMap:!1,shadowMode:!1})},"659e":function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".hidden{display:none}",""])},"65c2":function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"full"},[e.water?n("SandBox",{attrs:{water:e.water}}):e._e()],1)},s=[],r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.activeNodes&&e.water?n("div",{staticClass:"app-entry-dom"},e._l(e.activeNodes,function(t){return n("GraphNode",{key:t._id,attrs:{nodeMap:e.nodeMap,nodes:e.activeNodes,node:t}})}),1):e._e()},i=[],a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.compo&&e.node?n(e.compo,{ref:"me",tag:"Component",attrs:{parentNode:e.parentNode,parentComponent:e.nodeMap[e.node.to],isRootNode:!e.node.to,components:e.nodeMap,nodes:e.nodes,node:e.node},on:{ready:e.onReady,remove:e.onRemove}}):e._e()},c=[],l=(n("96cf"),n("3b8d")),d=(n("7514"),n("cebc")),u=(n("a481"),n("6b54"),n("8bbf")),p=n.n(u),h=n("5a89"),f=n("2100"),m=n.n(f);function v(e,t,n){return-1!==e.indexOf(t)&&e.slice(e.indexOf(t)+t.length,e.indexOf(n))}var y=function(e){var t={};e=e.trim(),t.template=v(e,"<template>","</template>")||"",t.script=v(e,"<script>","<\/script>")||"",t.style=v(e,"<style>","</style>")||v(e,"<style scoped>","</style>");var n=!!v(e,"<style scoped>","</style>");return t.styleScoped=n,t},b=function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,o,s,r,i,a,c,l,d,u,f,v;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.src,o=t.noCSS,s=t.library,r=void 0===s?[]:s,i=y(n),a=" data-s-"+Math.ceil(1e5*Math.random()).toString(36),c=JSON.stringify(i.style),i.template=i.template.replace(">","".concat(a,">")),o&&(c=JSON.stringify("")),l="\n    var css = ".concat(c,";\n    var head = document.head || document.getElementsByTagName('head')[0];\n    var style = document.createElement('style');\n    style.type = 'text/css';\n    if (style.styleSheet) {\n      style.styleSheet.cssText = css;\n    } else {\n      style.appendChild(document.createTextNode(css));\n    }\n\n    function addScope (styleElt, scopeName) {\n\n      function process() {\n\n        var sheet = styleElt.sheet;\n        var rules = sheet.cssRules;\n        for ( var i = 0; i < rules.length; ++i ) {\n          let rule = rules[i];\n\n          if ( rule.type === 4 ) {\n\n            // console.log(rule)\n            for ( var j = 0; j < rule.cssRules.length; ++j ) {\n\n              let scopedSelectors = [];\n              let subRule = rule.cssRules[j];\n\n              subRule.selectorText.split(/s*,s*/).forEach(function(sel) {\n\n                scopedSelectors.push(scopeName+' '+sel);\n                let segments = sel.match(/([^ :]+)(.+)?/);\n                scopedSelectors.push(segments[1] + scopeName + (segments[2]||''));\n              });\n\n              let scopedRule = scopedSelectors.join(',') + subRule.cssText.substr(subRule.selectorText.length);\n\n              rule.deleteRule(j);\n              rule.insertRule(scopedRule, j);\n              // console.log(rule);\n            }\n\n            continue;\n          }\n\n          if ( rule.type !== 1 )\n            continue;\n\n          let scopedSelectors = [];\n\n          rule.selectorText.split(/s*,s*/).forEach(function(sel) {\n\n            scopedSelectors.push(scopeName+' '+sel);\n            let segments = sel.match(/([^ :]+)(.+)?/);\n            scopedSelectors.push(segments[1] + scopeName + (segments[2]||''));\n          });\n\n          let scopedRule = scopedSelectors.join(',') + rule.cssText.substr(rule.selectorText.length);\n          sheet.deleteRule(i);\n          sheet.insertRule(scopedRule, i);\n        }\n      }\n\n      try {\n        // firefox may fail sheet.cssRules with InvalidAccessError\n        process();\n      } catch (ex) {\n\n        if ( ex instanceof DOMException && ex.code === DOMException.INVALID_ACCESS_ERR ) {\n\n          styleElt.sheet.disabled = true;\n          styleElt.addEventListener('load', function onStyleLoaded() {\n\n            styleElt.removeEventListener('load', onStyleLoaded);\n\n            // firefox need this timeout otherwise we have to use document.importNode(style, true)\n            setTimeout(function() {\n\n              process();\n              styleElt.sheet.disabled = false;\n            });\n          });\n          return;\n        }\n\n        throw ex;\n      }\n    }\n\n    head.appendChild(style);\n    if (").concat(i.styleScoped,") {\n      addScope(style, '[").concat(a,"]');\n    }\n  "),i.script="var mycompo = { template: '<div></div>' };"+i.script,i.script=i.script.replace("export default {","mycompo = { \n\ttemplate: ".concat(JSON.stringify(i.template),",")),d="\n    return mycompo;\n  ",u=l+i.script+d,window.THREE=h,console.log(r),e.next=15,m()(r.filter(function(e){return e.url}).map(function(e){return{url:e.url}}));case 15:return f=new Function("Vue","THREE","window",u),v=f(p.a,h,window),console.log(v),e.abrupt("return",v);case 19:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),x=function(e){var t=e.vue,n=e.dep,o=void 0===n?{}:n;return t.components=Object(d["a"])({},t.components,o),t},g={},w=function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var o,s,r,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if(o=t.src,s=t.library,r=void 0===s?[]:s,!g[o]){e.next=5;break}return e.abrupt("return",g[o]);case 5:return e.next=7,b({src:o,noCSS:!1,library:r});case 7:return i=e.sent,i=x({vue:i,dep:{Object3D:n("9202").default}}),g[o]=i,e.abrupt("return",i);case 11:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),j={props:{node:{},nodes:{},nodeMap:{}},data:function(){var e=this;return{parentNode:this.nodes.find(function(t){return t._id===e.node.to}),compo:!1,self:{}}},created:function(){},methods:{onReady:function(e){var t=this,n=setInterval(function(){var o=t.nodeMap[t.node._id]=e,s=t.nodeMap[t.node.to];s&&(clearInterval(n),o.$emit("addToParent",{parent:s,me:o}),s.$emit("addChild",{child:o,me:s}))},1)},onRemove:function(){var e=this.$refs["me"],t=this.nodeMap[this.node.to];this.nodeMap[this.node._id]&&this.nodeMap[this.node._id].$emit("removeFromParent",{me:e,parent:t}),this.node.to&&this.nodeMap[this.node.to].$emit("removeChild",{me:t,child:e})},getCompos:function(){var e=Object(l["a"])(regeneratorRuntime.mark(function e(t){var n,o;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return n=t.node,o='\n        <template>\n          <div class="omg-this-compo" nodeid="'.concat(n._id,'"></div>\n        </template>\n        <script>\n        export default {\n        };\n        ',"<","/script>\n        <style>\n        </style>\n      "),e.next=4,w({src:n.src||o,library:n.library||[]});case 4:this.compo=e.sent,this.$forceUpdate();case 6:case"end":return e.stop()}},e,this)}));function t(t){return e.apply(this,arguments)}return t}(),init:function(){}},mounted:function(){this.getCompos({node:this.node})}},R=j,D=n("2877"),S=Object(D["a"])(R,a,c,!1,null,null,null),E=S.exports,N={components:{GraphNode:E},props:{water:{}},computed:{nodes:function(){return this.water.nodes},activeNodes:function(){return this.nodes.filter(function(e){return!e.trashed}).slice()}},watch:{water:function(){}},data:function(){return{nodeMap:{}}},mounted:function(){},methods:{}},M=N,_=(n("923e"),Object(D["a"])(M,r,i,!1,null,"353899c0",null)),$=_.exports,O={props:{nodes:{}},components:{SandBox:$},data:function(){return{water:{nodes:this.nodes}}},methods:{postMessage:function(e){console.log(e),this.$refs.sandbox}},watch:{nodes:function(){this.water.nodes=this.nodes}}},C=O,T=Object(D["a"])(C,o,s,!1,null,null,null);t["default"]=T.exports},9202:function(e,t,n){"use strict";n.r(t);var o=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"hidden"},[e._t("default")],2)},s=[],r=n("5a89"),i={props:{position:{},scale:{},quaternion:{},rotation:{},physics:{},visible:{default:!0}},watch:{visible:function(){this.obj3D.visible=this.visible},scale:{deep:!0,handler:function(e){e&&(this.obj3D.scale.x=e.x,this.obj3D.scale.y=e.y,this.obj3D.scale.z=e.z)}},position:{deep:!0,handler:function(e){e&&this.obj3D.position.copy(e)}},rotation:{deep:!0,handler:function(e){e&&(this.obj3D.rotation.x=e.x,this.obj3D.rotation.y=e.y,this.obj3D.rotation.z=e.z)}},quaternion:{deep:!0,handler:function(e){e&&this.obj3D.quaternion.copy(e)}}},data:function(){return{obj3D:new r["Object3D"]}},created:function(){var e=this;this.$on("add",function(t){e.obj3D.add(t)}),this.$on("remove",function(t){e.obj3D.remove(t)})},mounted:function(){this.scale&&this.obj3D.scale.copy(this.scale),this.position&&this.obj3D.position.copy(this.position),this.rotation&&(this.obj3D.rotation.x=this.rotation.x,this.obj3D.rotation.y=this.rotation.y,this.obj3D.rotation.z=this.rotation.z),this.obj3D.visible=this.visible,this.quaternion&&this.obj3D.quaternion.copy(this.quaternion),this.$emit("element",this.obj3D),this.$parent.$emit("add",this.obj3D)},beforeDestroy:function(){this.$emit("remove",this.obj3D),this.$parent.$emit("remove",this.obj3D)}},a=i,c=(n("0a14"),n("2877")),l=Object(c["a"])(a,o,s,!1,null,null,null);t["default"]=l.exports},"923e":function(e,t,n){"use strict";var o=n("d47b"),s=n.n(o);s.a},bd71:function(e,t,n){t=e.exports=n("2350")(!1),t.push([e.i,".app-entry-dom,.full,body,html{width:100%;height:100%}html{overflow:hidden}body{margin:0}.app-entry-dom{font-family:Avenir,Helvetica,Arial,sans-serif;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;color:#2c3e50;overflow:scroll;-webkit-overflow-scrolling:touch}",""])},d47b:function(e,t,n){var o=n("bd71");"string"===typeof o&&(o=[[e.i,o,""]]),o.locals&&(e.exports=o.locals);var s=n("499e").default;s("d841d61c",o,!0,{sourceMap:!1,shadowMode:!1})}}]);
//# sourceMappingURL=effectgraph.umd.min.2.js.map